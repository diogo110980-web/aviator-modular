<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Aviator Modular v17 - An√°lise Inteligente</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .input-section {
            background: #0f3460;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #667eea;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #667eea;
        }
        
        textarea, input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: #1a1a2e;
            color: #e0e0e0;
            font-family: monospace;
            font-size: 14px;
        }
        
        textarea:focus, input[type="number"]:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 10px rgba(118, 75, 162, 0.5);
        }
        
        .range-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: #0f3460;
            padding: 25px;
            border-radius: 15px;
            border-left: 4px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .detector {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .probability-value {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .status-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin: 10px 5px;
        }
        
        .status-high {
            background: #4CAF50;
            color: white;
        }
        
        .status-medium {
            background: #FFC107;
            color: #333;
        }
        
        .status-low {
            background: #f44336;
            color: white;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #444;
        }
        
        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background: rgba(102, 126, 234, 0.1);
        }
        
        .heatmap {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 5px;
            margin: 20px 0;
        }
        
        .heatmap-cell {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.1);
        }
        
        .cold { background: #2196F3; }
        .neutral { background: #FFC107; color: #333; }
        .hot { background: #F44336; }
        .extreme { background: #9C27B0; }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .stat-box {
            background: rgba(102, 126, 234, 0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #667eea;
        }
        
        .stat-label {
            color: #999;
            font-size: 0.9em;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            margin-top: 5px;
        }
        
        .debug-panel {
            background: #1a1a2e;
            border: 1px solid #444;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.85em;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .debug-line {
            color: #00ff00;
            margin: 5px 0;
        }
        
        .error {
            color: #ff6b6b;
        }
        
        .success {
            color: #4CAF50;
        }
        
        .alert-box {
            background: #FF6B6B;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            border-top: 1px solid #444;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Aviator Modular v17.0</h1>
            <p class="subtitle">‚úÖ VERS√ÉO 17 MODULARIZADA: An√°lise de Odds com 12 M√≥dulos Profissionais</p>
        </header>
        
        <div class="input-section">
            <h2>üìä ENTRADA DE DADOS</h2>
            <div class="input-group">
                <label for="oddsInput">Cole dados brutos de odds (um por linha):</label>
                <textarea id="oddsInput" rows="8" placeholder="1.5&#10;2.3&#10;5.8&#10;10.2&#10;1.9&#10;..."></textarea>
            </div>
            
            <div class="range-inputs">
                <div class="input-group">
                    <label for="rangeMin">Range Menor (para an√°lises atuais):</label>
                    <input type="number" id="rangeMin" value="1.3" step="0.1">
                </div>
                <div class="input-group">
                    <label for="rangeMax">Range Maior (para an√°lises futuras):</label>
                    <input type="number" id="rangeMax" value="18.0" step="0.1">
                </div>
            </div>
            
            <button onclick="analisarDados()">üîç Gerar An√°lise Completa</button>
            <button onclick="limparDados()">üóëÔ∏è Limpar Tudo</button>
        </div>
        
        <div class="grid-2">
            <div class="card">
                <h2>üéØ DETECTOR DE ODDS GIGANTES</h2>
                <div class="detector">
                    <div style="font-size: 0.9em; color: rgba(255,255,255,0.8);">Probabilidade</div>
                    <div class="probability-value" id="giganteProbability">0%</div>
                    <div style="font-size: 1.1em; margin: 15px 0;">√öltima Gigante: <strong id="ultimaGigante">-</strong></div>
                    <div>H√° quantos min: <strong id="tempoGigante">0</strong></div>
                    <div style="margin-top: 15px;">Sequ√™ncia atual: <strong id="sequenciaAtual">0</strong></div>
                </div>
            </div>
            
            <div class="card">
                <h2>üìà ESTAT√çSTICAS B√ÅSICAS</h2>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">Total de Odds</div>
                        <div class="stat-value" id="totalOdds">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">M√©dia</div>
                        <div class="stat-value" id="mediaOdds">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">M√≠nima</div>
                        <div class="stat-value" id="minOdds">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">M√°xima</div>
                        <div class="stat-value" id="maxOdds">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Mediana</div>
                        <div class="stat-value" id="medianaOdds">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Desvio Padr√£o</div>
                        <div class="stat-value" id="desvioOdds">0</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2>üìä DISTRIBUI√á√ÉO DE ODDS</h2>
            <div id="distribuicao"></div>
        </div>
        
        <div class="card">
            <h2>üó∫Ô∏è MAPA DE CALOR</h2>
            <div class="heatmap" id="heatmap"></div>
        </div>
        
        <div class="card">
            <h2>üìà M√âDIAS M√ìVEIS - SISTEMA DE ALERTAS</h2>
            <table id="mediasTable">
                <thead>
                    <tr>
                        <th>M√©dia</th>
                        <th>Valor Atual</th>
                        <th>Categoria</th>
                        <th>Chance Base</th>
                        <th>Chance Atual</th>
                        <th>Vantagem</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="mediasBody">
                </tbody>
            </table>
        </div>
        
        <div class="card">
            <h2>üß† AN√ÅLISE DE IA</h2>
            <div id="iaAnalise"></div>
        </div>
        
        <div class="card">
            <h2>üîç DEBUG - CONSOLE</h2>
            <div class="debug-panel" id="debugPanel"></div>
        </div>
        
        <footer class="footer">
            <p>üéâ <strong>Aviator Modular v17.0</strong></p>
            <p>12 M√≥dulos | 5.645 linhas | 87+ Fun√ß√µes | 0 Depend√™ncias</p>
            <p>Arquitetura Profissional Modular</p>
        </footer>
    </div>
    
    <!-- Importar m√≥dulos -->
    <script type="module">
        import CONFIG from './js/config.js';
        import Statistics from './js/modules/statistics.js';
        import Probability from './js/modules/probability.js';
        import Martingale from './js/modules/martingale.js';
        import AIAnalysis from './js/modules/ai-analysis.js';
        import Timing from './js/modules/timing.js';
        import MovingAverages from './js/modules/moving-averages.js';
        
        window.modules = {
            CONFIG,
            Statistics,
            Probability,
            Martingale,
            AIAnalysis,
            Timing,
            MovingAverages
        };
        
        window.analisarDados = analisarDados;
        window.limparDados = limparDados;
        
        function log(msg, type = 'info') {
            const panel = document.getElementById('debugPanel');
            const line = document.createElement('div');
            line.className = `debug-line ${type}`;
            line.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            panel.appendChild(line);
            panel.scrollTop = panel.scrollHeight;
        }
        
        function analisarDados() {
            try {
                const oddsText = document.getElementById('oddsInput').value;
                const rangeMin = parseFloat(document.getElementById('rangeMin').value);
                const rangeMax = parseFloat(document.getElementById('rangeMax').value);
                
                log('Iniciando an√°lise...', 'info');
                
                if (!oddsText.trim()) {
                    log('Erro: Cole os dados primeiro!', 'error');
                    alert('‚ùå Cole dados na textarea!');
                    return;
                }
                
                // Parser de dados
                const odds = oddsText
                    .split('\n')
                    .map(line => {
                        const num = parseFloat(line.trim().replace('x', ''));
                        return isNaN(num) ? null : num;
                    })
                    .filter(x => x !== null && x >= CONFIG.odds.rangeMin && x <= CONFIG.odds.rangeMax);
                
                log(`‚úì ${odds.length} odds processadas`, 'success');
                
                if (odds.length < 10) {
                    log('‚ö†Ô∏è M√≠nimo 10 odds para an√°lise completa', 'error');
                }
                
                // ============ STATISTICS ============
                const stats = Statistics.analisarDistribuicaoCorrigida_v3(odds, {
                    rangeMenor: rangeMin,
                    rangeMaior: rangeMax
                });
                
                // Atualizar stats b√°sicas
                document.getElementById('totalOdds').textContent = odds.length;
                document.getElementById('mediaOdds').textContent = stats.media.toFixed(2);
                document.getElementById('minOdds').textContent = stats.minimo.toFixed(2);
                document.getElementById('maxOdds').textContent = stats.maximo.toFixed(2);
                document.getElementById('medianaOdds').textContent = stats.mediana.toFixed(2);
                document.getElementById('desvioOdds').textContent = stats.desvio_padrao.toFixed(2);
                
                log(`Media: ${stats.media.toFixed(2)}, Desvio: ${stats.desvio_padrao.toFixed(2)}`, 'success');
                
                // ============ DISTRIBUI√á√ÉO ============
                let distHtml = '<table><tr><th>Range</th><th>Contagem</th><th>%</th><th>Visual</th></tr>';
                Object.entries(stats.distribuicao).forEach(([range, data]) => {
                    distHtml += `<tr>
                        <td>${range}</td>
                        <td>${data.count}</td>
                        <td>${data.percent.toFixed(1)}%</td>
                        <td>${data.visual}</td>
                    </tr>`;
                });
                distHtml += '</table>';
                document.getElementById('distribuicao').innerHTML = distHtml;
                
                // ============ HEATMAP ============
                const heatmap = document.getElementById('heatmap');
                heatmap.innerHTML = '';
                const sorted = [...odds].sort((a, b) => a - b);
                const step = Math.ceil(odds.length / 20);
                
                for (let i = 0; i < sorted.length; i += step) {
                    const cell = document.createElement('div');
                    cell.className = 'heatmap-cell';
                    const val = sorted[i];
                    
                    if (val >= 10) cell.classList.add('extreme');
                    else if (val >= 5) cell.classList.add('hot');
                    else if (val >= 2) cell.classList.add('neutral');
                    else cell.classList.add('cold');
                    
                    cell.textContent = val.toFixed(1);
                    heatmap.appendChild(cell);
                }
                
                // ============ PROBABILITY ============
                const gigantes10 = Probability.calcularProbabilidadeReal(odds, 10);
                document.getElementById('giganteProbability').textContent = 
                    `${gigantes10.probabilidade_suavizada.toFixed(1)}%`;
                
                log(`Gigantes (10x+): ${gigantes10.probabilidade_suavizada.toFixed(2)}%`, 'success');
                
                // ============ MOVING AVERAGES ============
                const medias = MovingAverages.calcularMediasMoveis(odds);
                let mediasHtml = '';
                medias.alertas.forEach(alerta => {
                    const status = alerta.intensidade === 'alta' ? 'status-high' : 
                                   alerta.percentual > 0 ? 'status-medium' : 'status-low';
                    mediasHtml += `<tr>
                        <td>SMA${alerta.periodo}</td>
                        <td>${medias.preco_atual.toFixed(2)}</td>
                        <td>Odds ‚â•${alerta.periodo}x</td>
                        <td>26.7%</td>
                        <td>${Math.abs(alerta.percentual).toFixed(1)}%</td>
                        <td>${alerta.percentual.toFixed(2)}%</td>
                        <td><span class="status-badge ${status}">
                            ${alerta.percentual > 0 ? 'üìà' : 'üìâ'} ${alerta.intensidade}
                        </span></td>
                    </tr>`;
                });
                document.getElementById('mediasBody').innerHTML = mediasHtml;
                
                if (medias.alertas.length > 0) {
                    log(`üö® ${medias.alertas.length} alertas de vantagem detectados!`, 'success');
                }
                
                // ============ IA ANALYSIS ============
                const ia = AIAnalysis.gerarRelatorioCompleto(odds);
                let iaHtml = `
                    <div>
                        <p><strong>Score Geral:</strong> ${ia.score_geral.toFixed(2)}/100</p>
                        <p><strong>Consist√™ncia:</strong> ${ia.analise_consistencia.nivel_consistencia}</p>
                        <p><strong>Oportunidades:</strong> ${ia.analise_janelas.oportunidades_detectadas}</p>
                        <p><strong>Recomenda√ß√£o:</strong> ${ia.recomendacao_geral}</p>
                    </div>
                `;
                document.getElementById('iaAnalise').innerHTML = iaHtml;
                
                log('‚úÖ An√°lise completa!', 'success');
                
            } catch (error) {
                log(`‚ùå Erro: ${error.message}`, 'error');
                console.error(error);
            }
        }
        
        function limparDados() {
            document.getElementById('oddsInput').value = '';
            document.getElementById('debugPanel').innerHTML = '';
            document.getElementById('heatmap').innerHTML = '';
            document.getElementById('mediasBody').innerHTML = '';
            document.getElementById('iaAnalise').innerHTML = '';
            log('Dados limpos', 'info');
        }
        
        log('üöÄ Aviator Modular v17.0 pronto!', 'success');
    </script>
</body>
</html>
